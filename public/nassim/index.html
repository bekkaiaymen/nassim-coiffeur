<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#FDB714">
    <meta name="description" content="ุตุงููู nassim - ุงุญุฌุฒ ููุนุฏู ูู ุฃูุถู ุตุงููู ุญูุงูุฉ">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Nassim Coiffeur">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/nassim/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/nassim/favicon.svg">
    <link rel="shortcut icon" type="image/x-icon" href="/nassim/favicon.svg">
    <link rel="icon" href="/nassim/logo.jpg">
    <link rel="apple-touch-icon" href="/nassim/logo.jpg">
    
    <title>โ๏ธ Nassim Coiffeur - ุตุงููู ุงูุญูุงูุฉ ุงูุฃูู</title>
    <link rel="stylesheet" href="/nassim/nassim.css">
    <link rel="stylesheet" href="/nassim/timeline-rating.css">
    <link rel="stylesheet" href="/nassim/timeline-new.css">
    <link rel="stylesheet" href="/nassim/ai-wassim.css">
    <link rel="stylesheet" href="/nassim/ai-stylist.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <!-- Preload Critical Script -->
    <script>
        // Define function IMMEDIATELY before any other scripts
        console.log('๐ INLINE v012 - Professional Smart Suggest with Full Validation');
        
        // Helper to get selected services from the page
        function getSelectedServicesFromPage() {
            const container = document.getElementById('selectedServices');
            if (!container || container.style.display === 'none') {
                console.log('โน๏ธ No services selected yet');
                return [];
            }
            
            // Try to access from window if available
            if (window.nassimState?.selectedServices) {
                return window.nassimState.selectedServices;
            }
            
            return [];
        }
        
        // Get employee weekly schedule from API
        async function getEmployeeSchedule(API_URL, businessId, employeeId) {
            try {
                const url = `${API_URL}/employees/${employeeId}`;
                console.log(`๐ Fetching employee schedule: ${url}`);
                
                // Try with auth token if available
                const token = localStorage.getItem('customerToken');
                const headers = token ? { 'Authorization': `Bearer ${token}` } : {};
                
                const response = await fetch(url, { headers });
                if (!response.ok) {
                    console.log('โ๏ธ Employee schedule not available, will use slot-based search');
                    return null;
                }
                
                const result = await response.json();
                if (result.success && result.data && result.data.workingHours) {
                    console.log(`โ Employee schedule loaded:`, result.data.workingHours);
                    return result.data.workingHours;
                }
                if (result.data && result.data.workingHours) {
                    return result.data.workingHours;
                }
                if (result.workingHours) {
                    return result.workingHours;
                }
            } catch (error) {
                console.log('โ๏ธ Could not load schedule, continuing with slot-based search');
            }
            return null;
        }
        
        // Find working hours for a specific day
        function getWorkingHoursForDay(schedule, dayOfWeek) {
            const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const dayName = days[dayOfWeek];
            const arabicDays = ['ุงูุฃุญุฏ', 'ุงูุฅุซููู', 'ุงูุซูุงุซุงุก', 'ุงูุฃุฑุจุนุงุก', 'ุงูุฎููุณ', 'ุงูุฌูุนุฉ', 'ุงูุณุจุช'];
            
            if (!schedule || !schedule[dayName]) {
                return { enabled: false, dayNameAr: arabicDays[dayOfWeek] };
            }
            
            const daySchedule = schedule[dayName];
            return {
                enabled: daySchedule.enabled !== false,
                start: daySchedule.start,
                end: daySchedule.end,
                shifts: daySchedule.shifts,
                dayNameAr: arabicDays[dayOfWeek]
            };
        }
        
        // Check if time is within working hours
        function isTimeWithinWorkingHours(timeStr, workingHours, duration = 30) {
            if (!workingHours || !workingHours.enabled) return false;
            if (!timeStr) return false;
            
            const [h, m] = timeStr.split(':').map(Number);
            const startMinutes = h * 60 + m;
            const endMinutes = startMinutes + duration;
            
            // Check shifts if available
            if (workingHours.shifts && workingHours.shifts.length > 0) {
                return workingHours.shifts.some(shift => {
                    if (!shift.start || !shift.end) return false;
                    const [sH, sM] = shift.start.split(':').map(Number);
                    const [eH, eM] = shift.end.split(':').map(Number);
                    const shiftStart = sH * 60 + sM;
                    const shiftEnd = eH * 60 + eM;
                    return startMinutes >= shiftStart && endMinutes <= shiftEnd;
                });
            }
            
            // Legacy format
            if (workingHours.start && workingHours.end) {
                const [sH, sM] = workingHours.start.split(':').map(Number);
                const [eH, eM] = workingHours.end.split(':').map(Number);
                const workStart = sH * 60 + sM;
                const workEnd = eH * 60 + eM;
                return startMinutes >= workStart && endMinutes <= workEnd;
            }
            
            return true; // No hours defined, allow
        }
        
        // Get working hours string for display
        function getWorkingHoursString(workingHours) {
            if (!workingHours) return 'ุบูุฑ ูุญุฏุฏ';
            
            if (workingHours.shifts && workingHours.shifts.length > 0) {
                return workingHours.shifts
                    .filter(s => s.start && s.end)
                    .map(s => `${s.start} - ${s.end}`)
                    .join(' ู ');
            }
            
            if (workingHours.start && workingHours.end) {
                return `${workingHours.start} - ${workingHours.end}`;
            }
            
            return 'ุบูุฑ ูุญุฏุฏ';
        }
        
        window.suggestNearestAppointment = async function() {
            const API_URL = window.location.hostname === 'localhost' 
                ? 'http://localhost:3000/api'
                : 'https://nassim-coiffeur.onrender.com/api';
            const NASSIM_BUSINESS_ID = '69259331651b1babc1eb83dc';
            
            console.log('๐ [Suggest] Professional Smart Function v2 called');
            
            const dateInput = document.getElementById('appointmentDate');
            const timeInput = document.getElementById('appointmentTime');
            const employeeSelect = document.getElementById('employeeSelect');
            const btn = document.getElementById('suggestBtn');

            // ุงูุชุญูู ูู ูุฌูุฏ ุงูุนูุงุตุฑ ุงูุฃุณุงุณูุฉ
            if (!dateInput || !timeInput) {
                console.error('โ [Suggest] Required form elements not found');
                if (window.showNotification) {
                    window.showNotification('โ ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ุญููู ุงููููุฐุฌ', 'error');
                } else {
                    alert('ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ุญููู ุงููููุฐุฌ');
                }
                return;
            }

            // ุงูุชุธุงุฑ ุชุญููู ุงูุจูุงูุงุช
            await new Promise(resolve => setTimeout(resolve, 100));

            // 1. ุงูุญุตูู ุนูู ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ ููุฏุชูุง
            const services = getSelectedServicesFromPage();
            const totalDuration = services.reduce((sum, s) => sum + (s.duration || 30), 0) || 30;
            const slotsNeeded = Math.ceil(totalDuration / 30);
            
            console.log(`โฑ๏ธ [Suggest] ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ:`, services);
            console.log(`โฑ๏ธ [Suggest] ุงููุฏุฉ ุงููุทููุจุฉ: ${totalDuration} ุฏูููุฉ (${slotsNeeded} ูุชุฑุงุช)`);

            // 2. ุงูุญุตูู ุนูู ุงูุชุงุฑูุฎ ุงููุญุฏุฏ ุฃู ุชุงุฑูุฎ ุงูููู
            let selectedDate = dateInput.value;
            if (!selectedDate) {
                selectedDate = new Date().toISOString().split('T')[0];
                dateInput.value = selectedDate;
            }
            
            // 3. ุงูุญุตูู ุนูู ุงูุญูุงู ุงููุญุฏุฏ
            const employeeId = employeeSelect && employeeSelect.value && employeeSelect.value !== 'any' && employeeSelect.value !== '' ? employeeSelect.value : '';
            const employeeName = employeeSelect?.options[employeeSelect.selectedIndex]?.text || '';
            
            console.log(`๐ค [Suggest] ุงูุญูุงู ุงููุญุฏุฏ: ${employeeName || 'ุฃู ุญูุงู'} (${employeeId || 'none'})`);

            // ุชุบููุฑ ุญุงูุฉ ุงูุฒุฑ
            if (btn) {
                btn.disabled = true;
                btn.innerHTML = `โณ ุฌุงุฑู ุงูุจุญุซ...`;
                btn.style.opacity = '0.6';
            }

            const timeToMinutes = (timeStr) => {
                if (!timeStr || typeof timeStr !== 'string') return 0;
                const [h, m] = timeStr.split(':').map(Number);
                return h * 60 + m;
            };

            try {
                const now = new Date();
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentTotalMinutes = currentHour * 60 + currentMinute;
                
                // 4. ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุญูุงู ูุนููุ ุชุญูู ูู ุฌุฏููู
                let employeeSchedule = null;
                if (employeeId) {
                    console.log(`๐ ุฌุงุฑู ุชุญููู ุฌุฏูู ุงูุญูุงู...`);
                    employeeSchedule = await getEmployeeSchedule(API_URL, NASSIM_BUSINESS_ID, employeeId);
                    
                    if (employeeSchedule) {
                        // ุงูุชุญูู ูู ุงูููู ุงููุญุฏุฏ
                        const checkDate = new Date(selectedDate);
                        const dayOfWeek = checkDate.getDay();
                        const workingHours = getWorkingHoursForDay(employeeSchedule, dayOfWeek);
                        
                        console.log(`๐ ุณุงุนุงุช ุนูู ููู ${workingHours.dayNameAr}:`, workingHours);
                        
                        // ุฅุฐุง ูุงู ุงูุญูุงู ูุง ูุนูู ูู ูุฐุง ุงูููู
                        if (!workingHours.enabled) {
                            if (btn) {
                                btn.disabled = false;
                                btn.innerHTML = 'โจ ุงูุชุฑุญ ุฃูุฑุจ ููุนุฏ';
                                btn.style.opacity = '1';
                            }
                            
                            if (window.showNotification) {
                                window.showNotification(`โ ุงูุญูุงู ${employeeName} ูุง ูุนูู ููู ${workingHours.dayNameAr}\n\n๐ก ูุฑุฌู ุงุฎุชูุงุฑ ููู ุขุฎุฑ ุฃู ุญูุงู ุขุฎุฑ`, 'error', 6000);
                            } else {
                                alert(`ุงูุญูุงู ${employeeName} ูุง ูุนูู ููู ${workingHours.dayNameAr}\n\nูุฑุฌู ุงุฎุชูุงุฑ ููู ุขุฎุฑ ุฃู ุญูุงู ุขุฎุฑ`);
                            }
                            return;
                        }
                    }
                }
                
                // 5. ุงูุจุญุซ ูู ุงูุชุงุฑูุฎ ุงููุญุฏุฏ ุฃููุงูุ ุซู ุงูุฃูุงู ุงูุชุงููุฉ
                const startDate = new Date(selectedDate);
                const maxDaysToCheck = 14;
                
                for (let dayOffset = 0; dayOffset < maxDaysToCheck; dayOffset++) {
                    const checkDate = new Date(startDate);
                    checkDate.setDate(checkDate.getDate() + dayOffset);
                    const dateStr = checkDate.toISOString().split('T')[0];
                    const dayOfWeek = checkDate.getDay();
                    const isToday = (dateStr === new Date().toISOString().split('T')[0]);
                    const arabicDays = ['ุงูุฃุญุฏ', 'ุงูุฅุซููู', 'ุงูุซูุงุซุงุก', 'ุงูุฃุฑุจุนุงุก', 'ุงูุฎููุณ', 'ุงูุฌูุนุฉ', 'ุงูุณุจุช'];

                    console.log(`๐ [ููู +${dayOffset}] ${dateStr} (${arabicDays[dayOfWeek]})`);

                    // ุงูุชุญูู ูู ุฌุฏูู ุงูุญูุงู ููุฐุง ุงูููู
                    if (employeeSchedule) {
                        const workingHours = getWorkingHoursForDay(employeeSchedule, dayOfWeek);
                        
                        if (!workingHours.enabled) {
                            console.log(`โญ๏ธ ุงูุญูุงู ูุง ูุนูู ููู ${workingHours.dayNameAr}ุ ููุชูู ููููู ุงูุชุงูู...`);
                            continue;
                        }
                    }

                    // ุฌูุจ ุงููุชุฑุงุช ุงููุชุงุญุฉ ูู ุงูุณูุฑูุฑ
                    let apiUrl = `${API_URL}/appointments/available-slots?business=${NASSIM_BUSINESS_ID}&date=${dateStr}&duration=${totalDuration}`;
                    if (employeeId) {
                        apiUrl += `&employee=${employeeId}`;
                    }
                    
                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        console.log(`โ๏ธ ูุดู ุฌูุจ ุงูุจูุงูุงุช ูู ${dateStr}`);
                        continue;
                    }
                    
                    const result = await response.json();
                    if (!result.success || !result.data || !Array.isArray(result.data)) {
                        continue;
                    }

                    // ููุชุฑุฉ ุงููุชุฑุงุช ุงููุชุงุญุฉ
                    let availableSlots = result.data
                        .filter(s => s.available === true)
                        .sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time));

                    console.log(`   ูุฌุฏูุง ${availableSlots.length} ูุชุฑุฉ ูุชุงุญุฉ`);

                    // ุฅุฐุง ูุงู ุงูููู ุงูุญุงููุ ุชุฎุทู ุงููุชุฑุงุช ุงููุงุถูุฉ
                    if (isToday) {
                        availableSlots = availableSlots.filter(s => timeToMinutes(s.time) > currentTotalMinutes);
                        console.log(`   ุจุนุฏ ุงุณุชุจุนุงุฏ ุงููุชุฑุงุช ุงููุงุถูุฉ: ${availableSlots.length} ูุชุฑุฉ`);
                    }

                    // ุงูุจุญุซ ุนู ูุชุฑุงุช ูุชุชุงููุฉ ููุฎุฏูุฉ
                    for (let i = 0; i <= availableSlots.length - slotsNeeded; i++) {
                        const startSlot = availableSlots[i];
                        const startMinutes = timeToMinutes(startSlot.time);

                        // ุงูุชุญูู ูู ุชููุฑ ูุชุฑุงุช ูุชุชุงููุฉ
                        let isSequenceAvailable = true;
                        for (let j = 1; j < slotsNeeded; j++) {
                            const nextSlot = availableSlots[i + j];
                            if (!nextSlot) {
                                isSequenceAvailable = false;
                                break;
                            }
                            const expectedMinutes = startMinutes + (j * 30);
                            
                            if (timeToMinutes(nextSlot.time) !== expectedMinutes) {
                                isSequenceAvailable = false;
                                break;
                            }
                        }

                        if (isSequenceAvailable) {
                            // ูุฌุฏูุง ููุนุฏุงู ููุงุณุจุงู!
                            console.log(`โ ูุฌุฏูุง ููุนุฏ: ${startSlot.time} ูู ${dateStr}`);
                            
                            // ููุก ุงูุญููู
                            dateInput.value = dateStr;
                            timeInput.value = startSlot.time;
                            
                            // ุฅุทูุงู ุฃุญุฏุงุซ ุงูุชุบููุฑ
                            const changeEvent = new Event('change', { bubbles: true });
                            dateInput.dispatchEvent(changeEvent);
                            timeInput.dispatchEvent(changeEvent);

                            // ุงุฎุชูุงุฑ ุงูููุช ูู time slots ุฅุฐุง ููุฌูุฏุฉ
                            if (window.selectTimeSlot) {
                                window.selectTimeSlot(startSlot.time);
                            }

                            const displayDate = new Date(dateStr).toLocaleDateString('ar-SA', {
                                weekday: 'long', day: 'numeric', month: 'long'
                            });
                            
                            const selectedEmpName = employeeSelect?.options[employeeSelect.selectedIndex]?.text || 'ุฃู ุญูุงู';
                            const serviceNames = services.map(s => s.name || s.serviceName).join(' + ') || 'ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ';
                            
                            // ุนุฑุถ ุฑุณุงูุฉ ุงููุฌุงุญ
                            if (window.showNotification) {
                                window.showNotification(
                                    `โ ุชู ุงูุชุฑุงุญ ููุนุฏ!\n\n๐ ${displayDate}\nโฐ ุงูุณุงุนุฉ ${startSlot.time}\n๐ค ${selectedEmpName}\nโ๏ธ ${serviceNames}\nโฑ๏ธ ุงููุฏุฉ: ${totalDuration} ุฏูููุฉ`, 
                                    'success', 
                                    6000
                                );
                            }

                            if (btn) {
                                btn.disabled = false;
                                btn.innerHTML = 'โ ุชู ุงูุงูุชุฑุงุญ';
                                btn.style.opacity = '1';
                                setTimeout(() => { btn.innerHTML = 'โจ ุงูุชุฑุญ ุฃูุฑุจ ููุนุฏ'; }, 3000);
                            }
                            return;
                        }
                    }
                }

                // ูู ูุฌุฏ ุฃู ููุนุฏ ูุชุงุญ
                if (window.showNotification) {
                    window.showNotification(
                        `๐ ุนุฐุฑุงูุ ูู ูุฌุฏ ูุชุฑุฉ ูุชุงุญุฉ ููุฏุฉ ${totalDuration} ุฏูููุฉ\n\n๐ก ุญุงูู:\n- ุงุฎุชูุงุฑ ุญูุงู ุขุฎุฑ\n- ุชูููู ุนุฏุฏ ุงูุฎุฏูุงุช\n- ุงูุจุญุซ ูู ุชุงุฑูุฎ ุขุฎุฑ`, 
                        'error', 
                        8000
                    );
                } else {
                    alert(`ุนุฐุฑุงูุ ูู ูุฌุฏ ูุชุฑุฉ ูุชุตูุฉ ุดุงุบุฑุฉ ููุฏุฉ ${totalDuration} ุฏูููุฉ ูู ุงูุฃุณุจูุนูู ุงููุงุฏููู.\nูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู ุฃู ุชูุณูู ุงูุฎุฏูุงุช.`);
                }
                
            } catch (error) {
                console.error('โ [Suggest] ุฎุทุฃ:', error);
                if (window.showNotification) {
                    window.showNotification('โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุจุญุซ ุนู ููุนุฏ\n\nูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู', 'error', 5000);
                } else {
                    alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุจุญุซ ุนู ููุนุฏ');
                }
            } finally {
                if (btn) {
                    btn.disabled = false;
                    btn.innerHTML = 'โจ ุงูุชุฑุญ ุฃูุฑุจ ููุนุฏ';
                    btn.style.opacity = '1';
                }
            }
        };
        console.log('โ Smart Function v2 defined at:', new Date().toISOString());
    </script>
</head>
<body>
    <!-- Splash Screen / Welcome Logo Animation -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <img src="/nassim/logo.jpg" alt="Nassim Coiffeur" class="splash-logo">
            <div class="splash-text">Nassim Coiffeur</div>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <!-- Main Home Page -->
    <div id="homePage" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <img src="/nassim/logo.jpg" alt="Nassim Logo" class="header-logo">
                <h1 class="header-title">Nassim Coiffeur</h1>
                <div class="header-actions">
                    <button class="header-icon-btn" onclick="showNotifications()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                        <span class="notification-badge"></span>
                    </button>
                    <button class="header-icon-btn" onclick="document.getElementById('searchInput').focus()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="search-box">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <input type="text" class="search-input" placeholder="ุงุจุญุซ ุนู ุฎุฏูุฉ ุฃู ุญูุงู..." id="searchInput">
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div id="installPromptContainer" class="install-cta hidden">
                <div class="install-cta-content">
                    <div class="install-cta-icon">๐ฑ</div>
                    <div>
                        <p class="install-cta-title">ุซุจุช ุชุทุจูู Nassim</p>
                        <p class="install-cta-desc">ุงุญูุธ ุงูุตุงููู ูุชุทุจูู ุนูู ูุงุชูู ููุฏุฎูู ุงูุณุฑูุน</p>
                    </div>
                </div>
                <button class="install-cta-button" onclick="promptPWAInstall()">ุชุซุจูุช ุงูุขู</button>
            </div>

            <!-- Contact Info Section -->
            <div class="contact-info-section">
                <a href="https://www.tiktok.com/@elsoultannassim3" target="_blank" class="contact-card-square contact-card-tiktok">
                    <div class="contact-card-icon">
                        <i class="fab fa-tiktok"></i>
                    </div>
                    <div class="contact-card-details">
                        <span class="contact-card-title">ุญุณุงุจ TikTok ุงูุฑุณูู</span>
                        <span class="contact-card-handle">@elsoultannassim3</span>
                    </div>
                </a>
                <a href="https://www.facebook.com/NassimCoiffeur47" target="_blank" rel="noopener noreferrer" class="contact-card-square contact-card-facebook">
                    <div class="contact-card-icon">
                        <i class="fab fa-facebook-f"></i>
                    </div>
                    <div class="contact-card-details">
                        <span class="contact-card-title">ุตูุญุฉ Facebook</span>
                        <span class="contact-card-handle">NassimCoiffeur47</span>
                    </div>
                </a>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="quick-action" onclick="showTimeline()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุงูุฌุฏูู ุงูุฒููู</span>
                </div>
                <div class="quick-action" onclick="showRating()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุชูููู ุงูุฎุฏูุฉ</span>
                </div>
                <div class="quick-action" onclick="handleReferFriend()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุฅุญุงูุฉ ุตุฏูู</span>
                </div>
                <div class="quick-action" onclick="showShop()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุงููุชุฌุฑ</span>
                </div>
                <div class="quick-action" onclick="showCoins()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุงูุนููุงุช</span>
                </div>
            </div>

            <!-- Second Row: Booking History, Social Media, Location -->
            <div class="quick-actions second-row" style="justify-content: center; margin-top: 15px;">
                <div class="quick-action" onclick="showBookingHistory()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุญุฌูุฒุงุชู</span>
                </div>

                <!-- Social Media Icons -->
                <a href="https://www.facebook.com/NassimCoiffeur47" target="_blank" class="quick-action social-icon facebook">
                    <div class="quick-action-icon" style="background: #1877F2; border-color: #1877F2;">
                        <i class="fab fa-facebook-f" style="color: white;"></i>
                    </div>
                    <span class="quick-action-label">ููุณุจูู</span>
                </a>

                <a href="https://www.tiktok.com/@elsoultannassim3" target="_blank" class="quick-action social-icon tiktok">
                    <div class="quick-action-icon" style="background: #000000; border-color: #333;">
                        <i class="fab fa-tiktok" style="color: white;"></i>
                    </div>
                    <span class="quick-action-label">ุชูู ุชูู</span>
                </a>

                <a href="https://www.instagram.com/nassim_coiffeur47" target="_blank" class="quick-action social-icon instagram">
                    <div class="quick-action-icon" style="background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); border: none;">
                        <i class="fab fa-instagram" style="color: white;"></i>
                    </div>
                    <span class="quick-action-label">ุงูุณุชูุฑุงู</span>
                </a>

                <div class="quick-action" onclick="openLocation()">
                    <div class="quick-action-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">ุงููููุน</span>
                </div>
            </div>

            <!-- Social Media Modal -->
            <div id="socialMediaModal" class="modal-overlay" style="display: none; z-index: 10000;">
                <div class="modal" style="max-width: 350px; text-align: center; padding: 20px;">
                    <div class="modal-header" style="justify-content: center; border: none; padding-bottom: 10px;">
                        <h3 class="modal-title">ุชูุงุตู ูุนูุง</h3>
                    </div>
                    <div class="modal-body" style="display: flex; flex-direction: column; gap: 15px;">
                        <a href="https://www.facebook.com/NassimCoiffeur47" target="_blank" class="social-link-btn facebook">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </a>
                        <a href="https://www.instagram.com/nassim_coiffeur47" target="_blank" class="social-link-btn instagram">
                            <i class="fab fa-instagram"></i> Instagram
                        </a>
                        <a href="https://www.tiktok.com/@elsoultannassim3" target="_blank" class="social-link-btn tiktok">
                            <i class="fab fa-tiktok"></i> TikTok
                        </a>
                    </div>
                    <button onclick="toggleSocialMediaMenu()" style="margin-top: 20px; width: 100%; padding: 10px; background: #333; color: white; border: none; border-radius: 8px;">ุฅุบูุงู</button>
                </div>
            </div>
            
            <!-- Enable Notifications Banner -->
            <div id="enableNotificationsBanner" class="notifications-banner" style="display: none;">
                <div class="banner-content">
                    <div class="banner-icon">๐</div>
                    <div class="banner-text">
                        <h4>ูุนูู ุงูุฅุดุนุงุฑุงุช</h4>
                        <p>ุงุญุตู ุนูู ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ ุชุฃููุฏ ููุงุนูุฏู</p>
                    </div>
                </div>
                <div class="banner-actions">
                    <button class="banner-btn primary" onclick="requestNotificationPermission()">ุชูุนูู</button>
                    <button class="banner-btn secondary" onclick="dismissNotificationBanner()">ูุงุญูุงู</button>
                </div>
            </div>

            <!-- Loyalty Points Card -->
            <div class="loyalty-card">
                <div class="loyalty-content">
                    <div class="loyalty-icon">โญ</div>
                    <div class="loyalty-info">
                        <div class="loyalty-points" id="loyaltyPoints">0</div>
                        <div class="loyalty-label">ููุงุท ุงูููุงุก</div>
                    </div>
                </div>
                <div class="loyalty-tier">
                    <span id="loyaltyTier">ุจุฑููุฒู</span>
                    <span class="tier-badge">๐ฅ</span>
                </div>
            </div>

            <!-- Specialists -->
            <div class="section-header">
                <h2 class="section-title">ุงูุญูุงููู</h2>
                <button class="see-all-btn" onclick="showAllSpecialists()">ุนุฑุถ ุงููู</button>
            </div>
            
            <div class="specialists-grid" id="specialistsList">
                <!-- Skeleton Loaders -->
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-text"></div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-text"></div>
                    </div>
                </div>
            </div>

            <!-- Services -->
            <div class="section-header">
                <h2 class="section-title">ุงูุฎุฏูุงุช</h2>
                <button class="see-all-btn" onclick="showAllServices()">ุนุฑุถ ุงููู</button>
            </div>

            <div class="services-list" id="servicesList">
                <!-- Services will be loaded here -->
            </div>

            <!-- Latest Posts -->
            <div class="section-header">
                <h2 class="section-title">ุขุฎุฑ ุงูุฃุฎุจุงุฑ</h2>
                <button class="see-all-btn" onclick="showPosts()">ุนุฑุถ ุงููู</button>
            </div>

            <div class="posts-list" id="postsList">
                <!-- Posts will be loaded here -->
            </div>

            <!-- Rewards -->
            <div class="section-header">
                <h2 class="section-title">ุงูููุงูุขุช</h2>
                <button class="see-all-btn" onclick="showRewards()">ุนุฑุถ ุงููู</button>
            </div>

            <div class="rewards-list" id="rewardsList">
                <!-- Rewards will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Posts Page -->
    <div id="postsPage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="goBackToHome()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">๐ข ุขุฎุฑ ุงูุฃุฎุจุงุฑ</h1>
        </div>

        <div id="allPostsList" class="posts-container">
            <!-- All posts will be loaded here -->
        </div>
    </div>

    <!-- Rewards Page -->
    <div id="rewardsPage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="goBackToHome()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">๐๏ธ ุงููุชุฌุฑ</h1>
        </div>

        <!-- Shop Tabs -->
        <div class="shop-tabs">
            <button class="shop-tab active" data-tab="products" onclick="switchShopTab('products', this)">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
                ุงูููุชุฌุงุช
            </button>
            <button class="shop-tab" data-tab="rewards" onclick="switchShopTab('rewards', this)">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                ุงูููุงูุขุช
            </button>
        </div>

        <!-- Products Tab Content -->
        <div id="productsTabContent" class="shop-tab-content active">
            <div id="allProductsList" class="products-container">
                <!-- All products will be loaded here -->
            </div>
        </div>

        <!-- Rewards Tab Content -->
        <div id="rewardsTabContent" class="shop-tab-content">
            <!-- User Points -->
            <div class="user-points-card" onclick="showCoins()" style="cursor: pointer;">
                <div class="points-info">
                    <div class="points-value" id="userPoints">0</div>
                    <div class="points-label">ููุงุทู ุงูุญุงููุฉ (ุงุถุบุท ููุชูุงุตูู)</div>
                </div>
                <div class="points-icon">โญ</div>
            </div>

            <div id="allRewardsList" class="rewards-container">
                <!-- All rewards will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Coins Page -->
    <div id="coinsPage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="goBackToHome()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">๐ฐ ุงูุนููุงุช</h1>
        </div>

        <!-- User Coins Balance -->
        <div class="coins-balance-card">
            <div class="balance-content">
                <div class="balance-icon">๐ช</div>
                <div class="balance-info">
                    <div class="balance-value" id="userCoins">0</div>
                    <div class="balance-label">ุนููุงุชู ุงูุญุงููุฉ</div>
                </div>
            </div>
            <!-- Pending Points Section -->
            <div id="pendingPoints" class="pending-points-section" style="display: none;">
                <!-- Will be populated by JS -->
            </div>
            <button class="buy-coins-btn" onclick="showBuyCoinsModal()">
                <span>+</span> ุดุฑุงุก ุนููุงุช
            </button>
        </div>

        <!-- Coins History -->
        <div class="section-header" style="margin: 24px 0 16px;">
            <h3>ุณุฌู ุงูุนููุงุช</h3>
        </div>
        <div id="coinsHistoryList" class="coins-history-container">
            <!-- Coins history will be loaded here -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="showHome()" id="nav-home">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
            <span class="nav-label">ุงูุฑุฆูุณูุฉ</span>
        </button>
        <button class="nav-item" onclick="showPosts()" id="nav-posts">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"/>
            </svg>
            <span class="nav-label">ุงูุฃุฎุจุงุฑ</span>
        </button>
        <button class="nav-item center" onclick="openBookingModal()" id="nav-booking">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11v6m-3-3h6" />
            </svg>
        </button>
        <button class="nav-item" onclick="showShop()" id="nav-shop">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
            </svg>
            <span class="nav-label">ุงููุชุฌุฑ</span>
        </button>
        <button class="nav-item" onclick="showAccount()" id="nav-account">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            <span class="nav-label">ุญุณุงุจู</span>
        </button>
    </nav>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">๐ ุญุฌุฒ ููุนุฏ ุฌุฏูุฏ</h2>
                <button class="close-btn" onclick="closeBookingModal()">&times;</button>
            </div>
            <form id="bookingForm">
                <div class="form-group">
                    <label class="form-label">ุงุฎุชุฑ ุงูุฎุฏูุงุช (ุงุถุบุท ุนูู ุงูุฎุฏูุฉ ูุงุฎุชูุงุฑูุง) *</label>
                    <div id="bookingServicesList" class="booking-services-grid"></div>
                    <small style="color: var(--text-secondary); display: block; margin-top: 8px;">ููููู ุงุฎุชูุงุฑ ุนุฏุฉ ุฎุฏูุงุช</small>
                </div>

                <div id="selectedServices" class="booking-summary" style="display: none;">
                    <div class="summary-content">
                        <div class="summary-row">
                            <span class="summary-label">ุนุฏุฏ ุงูุฎุฏูุงุช:</span>
                            <strong id="servicesCount">0</strong>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">ุงููุฏุฉ ุงูุฅุฌูุงููุฉ:</span>
                            <strong id="totalDuration">0 ุฏูููุฉ</strong>
                        </div>
                        <div class="summary-row total-price-row">
                            <span class="summary-label">ุงููุฌููุน:</span>
                            <strong id="totalPrice">0 ุฏุฌ</strong>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ุงุฎุชุฑ ุงูุญูุงู *</label>
                    <select id="employeeSelect" class="form-select" required>
                        <option value="">-- ุงุฎุชุฑ ุงูุญูุงู --</option>
                    </select>
                </div>

                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label class="form-label" style="margin-bottom: 0;">ุงูุชุงุฑูุฎ *</label>
                        <button type="button" id="suggestBtn" onclick="_callSuggestSafe()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 6px 14px; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; display: flex; align-items: center; gap: 4px;">
                            <span>โจ</span>
                            <span>ุงูุชุฑุญ ุฃูุฑุจ ููุนุฏ</span>
                        </button>
                    </div>
                    <input type="date" id="appointmentDate" class="form-input" required onchange="loadAvailableSlots()" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูููุช *</label>
                    <input type="time" id="appointmentTime" class="form-input" required style="font-size: 16px; padding: 14px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูุฃููุงุช ุงููุชุงุญุฉ (ุงุฎุชูุงุฑู)</label>
                    <div id="timeSlots" class="time-slots">
                        <div class="working-hours-info">
                            <div class="working-hours-header">
                                <span class="hours-icon">๐</span>
                                <h4>ุฃููุงุช ุงูุนูู</h4>
                            </div>
                            <div class="working-hours-grid">
                                <div class="working-shift morning-shift">
                                    <div class="shift-icon">๐</div>
                                    <div class="shift-details">
                                        <span class="shift-label">ุงููุชุฑุฉ ุงูุตุจุงุญูุฉ</span>
                                        <span class="shift-time">10:00 ุต - 2:00 ู</span>
                                    </div>
                                </div>
                                <div class="working-shift evening-shift">
                                    <div class="shift-icon">๐</div>
                                    <div class="shift-details">
                                        <span class="shift-label">ุงููุชุฑุฉ ุงููุณุงุฆูุฉ</span>
                                        <span class="shift-time">4:30 ู - 9:00 ู</span>
                                    </div>
                                </div>
                            </div>
                            <div class="restricted-time-notice">
                                <div class="notice-icon">โ๏ธ</div>
                                <div class="notice-content">
                                    <div class="notice-title">ุฃููุงุช ุงูุถุบุท</div>
                                    <div class="notice-time">5:40 ู - 9:00 ู</div>
                                    <div class="notice-action">
                                        <span class="notice-text">ูุฑุฌู ุฏูุน 100 ุฏููุงุฑ ุฌุฒุงุฆุฑู</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                    <textarea id="appointmentNotes" rows="3" placeholder="ุฃู ููุงุญุธุงุช ุฎุงุตุฉุ" style="resize: vertical;"></textarea>
                </div>

                <button type="submit" class="book-now-btn" id="confirmBookingBtn">
                    ุชุฃููุฏ ุงูุญุฌุฒ
                </button>
            </form>
        </div>
    </div>

    <!-- Notifications Page -->
    <div id="notificationsPage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="goBackToHome()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">๐ ุงูุฅุดุนุงุฑุงุช</h1>
        </div>

        <div class="notifications-container" id="notificationsList">
            <!-- Notifications will be loaded here -->
        </div>

        <div class="empty-notifications hidden">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="80" height="80">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
            </svg>
            <h3>ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช</h3>
            <p>ุณูุนููู ุจุฃู ุชุญุฏูุซุงุช ูููุฉ</p>
        </div>
    </div>

    <!-- Booking History Page -->
    <div id="bookingHistoryPage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="goBackToHome()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">๐ ุณุฌู ุงูุญุฌูุฒุงุช</h1>
        </div>

        <div class="booking-tabs">
            <button class="booking-tab active" onclick="filterBookings('all')">ุงููู</button>
            <button class="booking-tab" onclick="filterBookings('upcoming')">ุงููุงุฏูุฉ</button>
            <button class="booking-tab" onclick="filterBookings('completed')">ุงูููุชููุฉ</button>
            <button class="booking-tab" onclick="filterBookings('cancelled')">ุงูููุบูุฉ</button>
        </div>

        <div id="bookingsList" class="bookings-container">
            <!-- Bookings will be loaded here -->
        </div>

        <div class="empty-bookings hidden">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="80" height="80">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <h3>ูุง ุชูุฌุฏ ุญุฌูุฒุงุช</h3>
            <p>ุงุจุฏุฃ ุจุญุฌุฒ ููุนุฏู ุงูุฃูู ุงูุขู</p>
            <button class="book-now-btn" onclick="openBookingModal()">ุงุญุฌุฒ ุงูุขู</button>
        </div>
    </div>

    <!-- Edit Profile Page -->
    <div id="editProfilePage" class="page-container hidden">
        <div class="page-header">
            <button class="back-btn-page" onclick="showAccount()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">โ๏ธ ุชุนุฏูู ุงูููู ุงูุดุฎุตู</h1>
        </div>

        <form id="editProfileForm" class="edit-profile-form">
            <div class="form-group">
                <label class="form-label">ุงูุงุณู ุงููุงูู *</label>
                <input type="text" id="editName" class="form-input" required>
            </div>

            <div class="form-group">
                <label class="form-label">ุฑูู ุงููุงุชู *</label>
                <input type="tel" id="editPhone" class="form-input" required>
            </div>

            <div class="form-group">
                <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                <input type="email" id="editEmail" class="form-input">
            </div>

            <button type="submit" class="book-now-btn">
                ุญูุธ ุงูุชุบููุฑุงุช
            </button>
        </form>
    </div>

    <!-- Account Page -->
    <div id="accountPage" class="page-container hidden">
        <div class="account-header">
            <div class="profile-section">
                <div class="profile-avatar">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=faces" alt="Profile" id="profileImage">
                </div>
                <h2 class="profile-name" id="profileName"></h2>
                <p class="profile-email" id="profileEmail"></p>
                <p class="profile-phone" id="profilePhone" style="color: #999; font-size: 14px; margin-top: 4px;"></p>
                
                <!-- Points Display in Account -->
                <div class="account-points-card" onclick="showCoins()" style="margin-top: 16px; background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%); border-radius: 12px; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; border: 1px solid rgba(253, 185, 49, 0.2); box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; box-shadow: 0 2px 10px rgba(253, 185, 49, 0.3); color: #000;">
                            โญ
                        </div>
                        <div>
                            <div style="color: #aaa; font-size: 12px; margin-bottom: 2px;">ููุงุท ุงูููุงุก</div>
                            <div style="color: #FDB931; font-weight: 800; font-size: 20px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);" id="accountPagePoints">0</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; background: rgba(253, 185, 49, 0.1); padding: 4px 10px; border-radius: 20px; border: 1px solid rgba(253, 185, 49, 0.2);">
                        <span style="color: #FDB931; font-size: 12px; font-weight: 700;" id="accountPageTier">ุจุฑููุฒู</span>
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="14" height="14" style="color: #FDB931;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Menu -->
        <div class="account-menu">
            <div class="menu-section">
                <h3 class="menu-section-title">ุงูุญุณุงุจ</h3>
                
                <button class="menu-item" onclick="editProfile()">
                    <div class="menu-item-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </div>
                    <div class="menu-item-content">
                        <span class="menu-item-title">ุชุนุฏูู ุงูููู ุงูุดุฎุตู</span>
                        <span class="menu-item-subtitle">ุงูุงุณูุ ุงูุจุฑูุฏุ ุฑูู ุงููุงุชู</span>
                    </div>
                    <svg class="menu-item-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>

                <button class="menu-item" onclick="showBookingHistory()">
                    <div class="menu-item-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="menu-item-content">
                        <span class="menu-item-title">ุณุฌู ุงูุญุฌูุฒุงุช</span>
                        <span class="menu-item-subtitle">ุนุฑุถ ุฌููุน ุญุฌูุฒุงุชู ุงูุณุงุจูุฉ</span>
                    </div>
                    <svg class="menu-item-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
            </div>

            <div class="menu-section">
                <h3 class="menu-section-title">ุงูุฅุนุฏุงุฏุงุช</h3>
                
                <button class="menu-item" onclick="showNotificationSettings()">
                    <div class="menu-item-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                    </div>
                    <div class="menu-item-content">
                        <span class="menu-item-title">ุงูุฅุดุนุงุฑุงุช</span>
                        <span class="menu-item-subtitle">ุฅุฏุงุฑุฉ ุฅุดุนุงุฑุงุช ุงูุชุทุจูู</span>
                    </div>
                    <svg class="menu-item-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>

                <button class="menu-item" onclick="toggleSalonHotline()">
                    <div class="menu-item-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                    </div>
                    <div class="menu-item-content">
                        <span class="menu-item-title">ุฑูู ุงูุตุงููู</span>
                        <span class="menu-item-subtitle" id="salonHotlineToggleText">ุงุถุบุท ูุฅุธูุงุฑ ุงูุฑูู</span>
                    </div>
                    <svg class="menu-item-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>

                <div id="salonHotlineCard" class="secret-contact-card hidden">
                    <div class="secret-contact-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="28" height="28">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                    </div>
                    <div class="secret-contact-content">
                        <p class="secret-contact-title">0556 46 81 96</p>
                        <p class="secret-contact-note">ุฑูู ุงูุตุงููู</p>
                        <a href="tel:+213556468196" class="secret-contact-link">ุงุชุตู ุงูุขู</a>
                    </div>
                </div>
            </div>

            <button class="logout-btn" onclick="logout()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
                ุชุณุฌูู ุงูุฎุฑูุฌ
            </button>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- AI Assistant Floating Icon - Wassim -->
    <div id="aiFloatingIcon" class="ai-floating-icon" title="ุงุณุฃู wassim - ุงููุณุงุนุฏ ุงูุฐูู" style="display: flex !important; visibility: visible !important; opacity: 1 !important;">
        <div class="wassim-avatar-container">
            <div class="wassim-avatar-circle" id="wassimAvatarCircle" style="background-image: url('/nassim/wassim-logo.jpg');">
                <div class="wassim-initial" id="wassimInitial">W</div>
            </div>
        </div>
        <input type="file" id="wassimImageUpload" accept="image/*" style="display: none;" onchange="handleWassimImageUpload(event)">
    </div>

    <!-- AI Chat Modal -->
    <div id="aiChatModal" class="ai-chat-modal hidden">
        <div class="ai-chat-header">
            <div class="ai-chat-header-content">
                <div class="ai-chat-icon">๐ค</div>
                <div class="ai-chat-header-text">
                    <h3>ุงููุณุงุนุฏ ุงูุฐูู</h3>
                    <p>Nassim Coiffeur</p>
                </div>
            </div>
            <button class="ai-chat-close" onclick="closeAIChat()">ร</button>
        </div>

        <div class="ai-chat-messages" id="aiChatMessages">
            <div class="ai-welcome-message">
                <div class="ai-welcome-icon">๐ค</div>
                <h3>ูุฑุญุจุงู ุจู!</h3>
                <p>ุฃูุง ูุณุงุนุฏู ุงูุฐูู ูู ุตุงููู <strong>Nassim Coiffeur</strong>.<br>
                ุงุณุฃููู ุนู ุฃู ุฎุฏูุฉุ ุณุนุฑุ ุฃู ุงุญุฌุฒ ููุนุฏู ุจุณูููุฉ!</p>
            </div>
        </div>

        <div class="ai-typing-indicator" id="aiTypingIndicator">
            <div class="ai-typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <div class="ai-chat-input-container">
            <div class="ai-chat-input-wrapper">
                <textarea 
                    id="aiChatInput" 
                    class="ai-chat-input" 
                    placeholder="ุงูุชุจ ุณุคุงูู ููุง..."
                    rows="1"
                ></textarea>
                <button class="ai-send-button" id="aiSendButton" onclick="sendAIMessage()">
                    โค
                </button>
            </div>
        </div>
    </div>

    <!-- AI Stylist Modal -->
    <div id="aiStylistModal" class="ai-stylist-modal" style="display: none;">
        <div class="ai-stylist-content">
            <div class="ai-stylist-header">
                <button class="close-ai-btn" onclick="closeAIStylist()">โ</button>
                <h2>๐ค ูุตูู AI ููุญูุงูุฉ</h2>
                <p>ุงูุชุดู ุฃูุถู ุชุตูููุฉ ุดุนุฑ ุชูุงุณุจู ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
                <div class="ai-demo-badge">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <span>Powered by Google Gemini AI</span>
                </div>
            </div>

            <div class="ai-stylist-body">
                <!-- Upload Section -->
                <div class="ai-upload-section">
                    <div class="upload-box" id="uploadBox">
                        <input type="file" id="aiImageInput" accept="image/*" onchange="handleAIImageUpload(event)" style="display: none;">
                        <label for="aiImageInput" class="upload-label">
                            <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <span>ุงููุฑ ูุชุญููู ุตูุฑุชู</span>
                            <small>ุฃู ุงุณุญุจ ุงูุตูุฑุฉ ููุง</small>
                        </label>
                        <div id="imagePreviewContainer" style="display: none;">
                            <img id="imagePreview" class="ai-image-preview" alt="Preview">
                            <button class="remove-image-btn" onclick="removeAIImage()">โ</button>
                        </div>
                    </div>
                </div>

                <!-- Style Selection -->
                <div class="ai-style-section">
                    <h3>ุงุฎุชุฑ ููุน ุงูุชุตูููุฉ ุงูููุถูุฉ</h3>
                    <div class="style-options">
                        <label class="style-option">
                            <input type="radio" name="hairStyle" value="classic" checked>
                            <span class="style-card">
                                <span class="style-icon">๐</span>
                                <span>ููุงุณููู</span>
                            </span>
                        </label>
                        <label class="style-option">
                            <input type="radio" name="hairStyle" value="modern">
                            <span class="style-card">
                                <span class="style-icon">โจ</span>
                                <span>ุนุตุฑู</span>
                            </span>
                        </label>
                        <label class="style-option">
                            <input type="radio" name="hairStyle" value="fade">
                            <span class="style-card">
                                <span class="style-icon">๐ฅ</span>
                                <span>ููุฏ</span>
                            </span>
                        </label>
                        <label class="style-option">
                            <input type="radio" name="hairStyle" value="beard">
                            <span class="style-card">
                                <span class="style-icon">๐ง</span>
                                <span>ูุญูุฉ</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Generate Button -->
                <button class="ai-generate-btn" onclick="generateAIHairstyle()" id="generateBtn">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    <span>ุชูููุฏ ุงูุชุตูููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                </button>

                <!-- Loading State -->
                <div id="aiLoadingState" class="ai-loading-state" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>ุฌุงุฑู ุชุญุณูู ุตูุฑุชู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู...</p>
                    <small>ุชุทุจูู ุงูููุงุชุฑ ูุงูุชุญุณููุงุช ุงููุฎุตุตุฉ</small>
                </div>

                <!-- Results Section -->
                <div id="aiResultsSection" class="ai-results-section" style="display: none;">
                    <div class="ai-results-container">
                        <!-- Suggestions will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Timeline Page -->
    <div id="timelinePage" class="page-modal" style="display: none;">
        <div class="modal-content full-page">
            <div class="modal-header">
                <button class="modal-back-btn" onclick="closeTimeline()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <h2 class="modal-title">๐ ุงูุฌุฏูู ุงูุฒููู</h2>
                <div></div>
            </div>
            
            <div class="page-content">
                <div class="timeline-controls">
                    <label for="timelineDate" class="form-label">ุงุฎุชูุงุฑ ุงูููู</label>
                    <div class="date-input-group">
                        <input type="date" id="timelineDate" class="form-input">
                        <button type="button" class="btn-primary" onclick="refreshTimelineView()">ุชุญุฏูุซ</button>
                    </div>
                </div>

                <div class="timeline-summary" id="timelineSummaryCards"></div>

                <div class="timeline-legend">
                    <span class="legend-item"><span class="legend-dot available"></span>ูุชุงุญ</span>
                    <span class="legend-item"><span class="legend-dot booked"></span>ูุญุฌูุฒ</span>
                    <button class="btn-expand-timeline" onclick="openFullscreenTimeline()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                        </svg>
                        ุนุฑุถ ุนููุฏู
                    </button>
                </div>

                <!-- Horizontal Timeline View -->
                <div class="timeline-strip-container">
                    <div class="timeline-strip" id="timelineStrip">
                        <!-- Slots will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fullscreen Vertical Timeline -->
    <div id="fullscreenTimelinePage" class="fullscreen-timeline-modal" style="display: none;">
        <div class="fullscreen-timeline-header">
            <button class="modal-back-btn" onclick="closeFullscreenTimeline()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            <h2 class="modal-title">๐ ุงูุฌุฏูู ุงูุฒููู - ุนุฑุถ ูุงูู</h2>
            <div class="fullscreen-date-display" id="fullscreenDateDisplay"></div>
        </div>
        
        <div class="fullscreen-timeline-content">
            <div class="vertical-timeline-strip" id="verticalTimelineStrip">
                <!-- Will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Rating Page -->
    <div id="ratingPage" class="page-modal" style="display: none;">
        <div class="modal-content full-page">
            <div class="modal-header">
                <button class="modal-back-btn" onclick="closeRating()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <h2 class="modal-title">โญ ุชูููู ุงูุฎุฏูุฉ</h2>
                <div></div>
            </div>
            
            <div class="page-content rating-page-container">
                
                <!-- Step 1: Phone Lookup -->
                <div id="ratingLookupSection">
                    <div class="rating-intro">
                        <h3 class="section-subtitle">ูุฑุญุจุงู ุจู</h3>
                        <p class="section-description">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูู ูุงุชูู ูุนุฑุถ ููุงุนูุฏู ุงูููุชููุฉ</p>
                    </div>
                    <form onsubmit="handleRatingPhoneLookup(event)" class="rating-lookup-form">
                        <div class="form-group">
                            <label class="form-label">ุฑูู ุงููุงุชู</label>
                            <input type="tel" id="ratingPhoneNumber" class="form-input" placeholder="05XXXXXXXX" required pattern="[0-9]{10}" maxlength="10">
                        </div>
                        <button type="submit" class="btn-primary-large">ุจุญุซ ุนู ููุงุนูุฏ</button>
                    </form>
                </div>

                <!-- Step 2: Select Appointment -->
                <div id="ratingAppointmentsSection" style="display: none;">
                    <div class="section-header-row">
                        <h3 class="section-subtitle">ุงุฎุชุฑ ุงูููุนุฏ ููุชูููู</h3>
                        <button type="button" class="btn-text" onclick="backToRatingLookup()">ุชุบููุฑ ุงูุฑูู</button>
                    </div>
                    <div id="ratingAppointmentsList" class="appointments-list">
                        <!-- Items will be injected here -->
                    </div>
                </div>

                <!-- Step 3: Rating Form -->
                <div id="ratingFormSection" style="display: none;">
                    <div id="ratingSelectedAppointmentDetails" class="selected-appointment-card">
                        <!-- Details injected here -->
                    </div>
                    
                    <form id="customerRatingForm" class="rating-form" onsubmit="handleCustomerRatingSubmit(event)">
                        <div class="form-group">
                            <label class="form-label">ุชููููู</label>
                            <div class="rating-stars-large" id="ratingStarsContainer">
                                <span class="rating-star-large" data-rating="1" onclick="selectRatingStar(1)">โ</span>
                                <span class="rating-star-large" data-rating="2" onclick="selectRatingStar(2)">โ</span>
                                <span class="rating-star-large" data-rating="3" onclick="selectRatingStar(3)">โ</span>
                                <span class="rating-star-large" data-rating="4" onclick="selectRatingStar(4)">โ</span>
                                <span class="rating-star-large" data-rating="5" onclick="selectRatingStar(5)">โ</span>
                            </div>
                            <input type="hidden" id="ratingValueInput">
                        </div>

                        <div class="form-group">
                            <label class="form-label">ููุงุญุธุงุชู (ุงุฎุชูุงุฑู)</label>
                            <textarea id="ratingComment" class="rating-comment-box" placeholder="ุงูุชุจ ุชุนูููู ููุง..."></textarea>
                        </div>
                        
                        <!-- Hidden fields for submission -->
                        <input type="hidden" id="ratingTime">
                        <input type="hidden" id="ratingBarber">
                        <input type="hidden" id="ratingService">

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="backToRatingAppointments()">ุฑุฌูุน</button>
                            <button type="submit" class="btn-primary-large">ุฅุฑุณุงู ุงูุชูููู</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
                                <span class="star" data-rating="3" onclick="selectRatingStar(3)">โ</span>
                                <span class="star" data-rating="4" onclick="selectRatingStar(4)">โ</span>
    <!-- Notification Side Panel -->
    <div id="notificationPanel" class="notification-panel">
        <div class="panel-header">
            <h2>๐ ุงูุฅุดุนุงุฑุงุช</h2>
            <button class="panel-close" onclick="closeNotificationPanel()">ร</button>
        </div>
        <div class="panel-actions">
            <button class="mark-all-read-btn" onclick="markAllAsRead()">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                </svg>
                ุชุญุฏูุฏ ุงููู ูููุฑูุก
            </button>
            <button class="clear-all-btn" onclick="clearAllNotifications()">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                </svg>
                ูุณุญ ุงููู
            </button>
        </div>
        <div id="notificationPanelList" class="panel-notifications-list">
            <!-- Notifications will be dynamically inserted here -->
        </div>
    </div>
    <div id="notificationPanelOverlay" class="panel-overlay" onclick="closeNotificationPanel()"></div>

    <script>
    // Simplified caller - function already defined inline above
    window._callSuggestSafe = function() {
        console.log('๐ Caller invoked, checking function...');
        if (typeof window.suggestNearestAppointment === 'function') {
            console.log('โ Function found, calling...');
            window.suggestNearestAppointment();
        } else {
            console.error('โ Function NOT found after inline definition!');
            alert('ุฎุทุฃ ูู ุชุญููู ุงูุตูุญุฉุ ูุฑุฌู ุฅุนุงุฏุฉ ุงูุชุญููู');
        }
    };

    function toggleSocialMediaMenu() {
        const modal = document.getElementById('socialMediaModal');
        if (modal) {
            modal.style.display = modal.style.display === 'none' ? 'flex' : 'none';
        }
    }
    </script>
    <script src="/nassim/nassim-v8.js"></script>
    <script src="/nassim/ai-wassim.js"></script>
    <script src="/nassim/ai-stylist.js"></script>
</body>
</html>
